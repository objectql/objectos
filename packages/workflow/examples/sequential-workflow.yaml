# Sequential Workflow Example
# This workflow demonstrates a sequential process with ordered steps

name: 'Order Fulfillment'
description: 'Sequential order processing workflow'
type: sequential
version: '1.0.0'

states:
  received:
    initial: true
    transitions:
      process: payment_processing
    on_enter:
      - log_order_received
      - notify_customer
    metadata:
      label: 'Order Received'
      step: 1

  payment_processing:
    transitions:
      complete: inventory_check
      fail: payment_failed
    on_enter:
      - process_payment
    metadata:
      label: 'Processing Payment'
      step: 2

  inventory_check:
    transitions:
      available: packaging
      unavailable: out_of_stock
    on_enter:
      - check_inventory
    metadata:
      label: 'Checking Inventory'
      step: 3

  packaging:
    transitions:
      complete: shipping
    on_enter:
      - package_items
      - generate_shipping_label
    metadata:
      label: 'Packaging'
      step: 4

  shipping:
    transitions:
      shipped: delivered
    on_enter:
      - update_tracking
      - notify_customer
    metadata:
      label: 'Shipping'
      step: 5

  delivered:
    final: true
    on_enter:
      - complete_order
      - request_feedback
    metadata:
      label: 'Delivered'
      step: 6

  payment_failed:
    final: true
    on_enter:
      - cancel_order
      - notify_customer
    metadata:
      label: 'Payment Failed'
      terminal: 'error'

  out_of_stock:
    final: true
    on_enter:
      - refund_payment
      - notify_customer
    metadata:
      label: 'Out of Stock'
      terminal: 'error'
