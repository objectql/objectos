# ==========================================
# 1. 应用基础信息 (App Identity)
# ==========================================
code: projects
name: Projects Management
description: Manage and track your projects efficiently.
dark: true
color: gray
icon: ri-settings-line
sort_no: 10                  # 在应用启动器中的排序

# ==========================================
# 3. 导航菜单定义 (Navigation Tree)
# ==========================================
# 结构说明：支持 Group(分组), Page(自定义页), Object(对象列表), URL(外链)
menu:
  # --- 模块 A: 仪表盘 ---
  - id: home_dashboard
    type: page
    label: 项目概览
    icon: layout-dashboard
    page_id: pm_overview_dashboard  # 指向 pages 表中的一个 Amis/Liquid 页面

  # --- 模块 B: 核心业务 (分组) ---
  - id: group_core
    type: group
    label: 项目执行
    children:
      # 1. 项目列表 (标准对象)
      - id: nav_projects
        type: object
        label: 所有项目
        icon: folder-kanban
        object_name: projects
        default_view: all           # 点击后默认打开 "全部" 视图

      # 2. 任务 (带过滤器的菜单 - 类似 ServiceNow 模式)
      - id: nav_my_tasks
        type: object
        label: 我的待办任务
        icon: check-circle-2
        object_name: tasks
        # 关键：菜单携带预设过滤条件
        filters: 
          - [ "owner", "=", "{currentUser}" ]
          - [ "status", "!=", "completed" ]

      # 3. 任务 (普通入口)
      - id: nav_all_tasks
        type: object
        label: 所有任务
        icon: list-todo
        object_name: tasks

  # --- 模块 C: 高级视图 (自定义页面) ---
  - id: group_views
    type: group
    label: 视图与分析
    children:
      # 1. 甘特图 (这是用 React/UMD 开发的特殊页面)
      - id: nav_gantt
        type: page
        label: 全局甘特图
        icon: calendar-range
        page_id: global_gantt_view

      # 2. 工时表
      - id: nav_timesheets
        type: object
        label: 工时填报
        icon: clock
        object_name: timesheets

  # --- 模块 D: 外部资源 ---
  - id: nav_help
    type: url
    label: 项目管理规范手册
    icon: book-open
    url: https://wiki.yourcompany.com/pm-guide
    target: _blank